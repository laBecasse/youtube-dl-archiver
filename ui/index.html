<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Youtube Dl Archiver</title>
    <link rel="stylesheet" href="/style.css">
    <script>
      const ADDRESS = '<%=address%>'
    </script>
    <script src="/script.js" defer></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div>
      <form action="/medias" method="post">
        <label for="post">Ajouter une vidéo</label>
        <input id="post" type="text" value="" name="url"/>
        <input id="" type="submit" value="Ajouter">
      </form>
    </div>
    <div>
      <form action="/update" method="get">
        <input id="update" type="submit" value="Mise à jour"/>
    <section id ="app">
    <div v-if="medias.length === 0" class="loading">Loading...</div>
    <div id="list">
      <div v-for="media in medias">
        <h4>{{media.title}}</h4>
        <video v-if="media.type === 'video'" controls :poster="(media.thumbnail) ? media.thumbnail.url: undefined" preload="none">
          <source :src="media.file_url" :type="media.mime">
            <track v-for="sub in media.subtitles"
                   :src="sub.url"
                   :label="sub.lang"
                   kind="subtitles" :srclang="sub.lang">
        </video>
        <audio v-if="media.type === 'audio'" controls preload="none">
            <source :src="media.file_url" :type="media.mime">
              Your browser does not support the audio element.
        </audio> 
        <img v-if="media.type === 'image'"
             :src="media.file_url">
        <a v-if="media.type === 'other'"
           :href="media.file_url">media</a>
      </div>
    </div>
    </section>
  </body>
</html>
